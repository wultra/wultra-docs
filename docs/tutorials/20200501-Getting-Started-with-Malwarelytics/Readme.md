# Getting Started with Malwarelytics

This tutorial explains how you can integrate Malwarelytics - our malware protection plugin for Android apps - into your application.

## Register at Malwarelytics

First, you need to create an account at our service. Simply [visit the Malwarelytics sign up page](https://www.wultra.com/malwarelytics-signup) and fill in your details.

After you sign up, we will verify your account before we provide you with the access to the service. The verification is needed to make the system examination more difficult for the cybercriminals. During the verification process, we will also set up your applications package names for production and development environments.

After the we finish the configuration and approve your account, you can log in to an empty Malwarelytics console.

![ Empty Malwarelytics Console ](/img/20200501-Getting-Started-with-Malwarelytics/01.png)

## Get the Malwarelytics SDK

You can download the Malwarelytics SDK in the **Get the SDK**. In the **Download the SDK** section, select the latest version and click the **Download** button.

![ Downloading the SDK ](/img/20200501-Getting-Started-with-Malwarelytics/02.png)

Once you have the SDK ready, place it to a desired location on your file system and add a new repository to the Android root project:

```rb
allproject {
  repositories {
    maven {
      url "${PATH_TO_MALWARELYTICS}/maven"
    }
  }
}
```

Then simply import the dependency in your Android project:

```rb
android {
  dependencies {
    implementation "com.wultra.android.antimalware:antivirus:${MALWARELYTICS_VERSION}"
  }
}
```

## Obtain API Keys

You can easily obtain Malwarelytics API keys in the Malwarelytics console, in the **Get the SDK** section. Simply scroll to the second section, **Set Up Your API Keys**, and select the application.

![ Downloading the SDK ](/img/20200501-Getting-Started-with-Malwarelytics/03.png)

## Integrate the SDK

To integrate the SDK in your app, insert the following code snippet to your `Application.onCreate()` method:

```kotlin
class MyApplication : Application() {

  override fun onCreate() {

    // Use your API keys in configuration
    val config = AntivirusConfig.Builder(appContext)
                   .apiUsername(API_USERNAME)
                   .apiPassword(API_PASSWORD)
                   .apiSignaturePublicKey(API_SIGNATURE_PUBLIC_KEY)
                   .build()

    // Obtain and initialize the Malwarelytics SDK instance
    val antivirus = Antivirus.getInstance()          
    antivirus.initializeAsync(config, object : Antivirus.InitializationObserver {
      override fun onInitialized() {
        // Malwarelytics is initialized and ready to be used

        // Set internal user ID if it is available
        antivirus.updateClientAppUserId(INTERNAL_USER_ID)
      }
    })
  }

}
```

<div class="alert alert-warning" role="alert">
<strong>Don't forget to set your internal user ID.</strong> Otherwise, it will be difficult to identify which users are infected later. In the ideal situation, you can use an opaque random device identifier as <code>INTERNAL_USER_ID</code>. However, any identifier that you can use to look up the infected user will do the trick.
</div>

After you launch the application, Malwarelytics automatically start and it will send the first impulse from your first active device to the Malwarelytics service.

![ Downloading the SDK ](/img/20200501-Getting-Started-with-Malwarelytics/04.png)

## Customize the UI Appearance

By default, the Malwarelytics SDK works in a silent mode. It only evaluates threats and sends them to the Malwarelytics service.

In the case you would like to inform the end-user about a problematic app right on the device, the easiest way to do this is to use our built-in user interface components:

```kotlin
val threatMitigationUIConfig = ThreatMitigationUIConfig.Builder()
  .notificationChannelId(ChannelIdString)
  .notificationSmallIcon(IconResInt)
  .screenBackgroundColor(ColorResInt)
  .screenButtonBackgroundColor(ColorResInt)
  .screenButtonTextColor(ColorResInt)
  .screenDeleteIconColor(ColorResInt)
  .screenSeparatorColor(ColorResInt)
  .screenTextColor(ColorResInt)
  .build()

val config = AntivirusConfig.Builder(appContext)
    // ...
    .setThreatMitigationUIConfig(threatMitigationUIConfig)
    .build()
```

By providing the UI configuration, Malwarelytics SDK automatically presents the appropriate UI components whenever needed, using your application as the vessel.

## Summary

We just integrated the Malwarelytics SDK into your Android app and sent the first data sample to the Malwarelytics service. After you launch your app to the public, your Malwarelytics console will start to fill up with useful data about active malware and infected devices.
